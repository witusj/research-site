"0",""
"0","# Simulation 1"
"0",""
"0","tic = time.time()"
"0","sim = np.array([1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]) # initial schedule"
"0","iats = fn.transform_schedule_iats(sim, d) # initial inter-arrival times"
"0","iats_d = np.diff(iats)"
"0","N = len(iats) # number of patients"
"0","# T = len(sim) # number of intervals"
"0","ctsm = np.random.choice(cts, size = (nsims * N), p=pct).reshape((nsims, N)) # client types matrix"
"0","stsm = np.random.lognormal(mean = nm, sigma=ns, size=(nsims * N)).reshape(nsims, N) # service times matrix"
"0","nsm = np.random.binomial(n=1, p=1-ns, size = (nsims * N)).reshape(nsims, N) # no-shows matrix"
"0","stsm = stsm * nsm # service times matrix with no-shows"
"0","simreswt = []"
"0","simresln = 0"
"0",""
"0","for i in range(nsims):"
"0","  experiment = fn.simulate_crn(iats, ctsm[i], stsm[i], logs=logs)"
"0","  simreswt.append(experiment[0].mean())"
"0","  ln = max(0, (experiment[1] - d))"
"0","  simresln += ln"
"0","  "
"0","mwt = np.array(simreswt).mean()"
"0","mln = simresln / nsims"
"0","loss = loss = 0.5 * mwt + 0.5 * mln"
"0","toc = time.time()"
"0","print(toc - tic)"
"1","2.0891880989074707
"
"0","# plots"
"0",""
"0","fig1, (axs1, axs2) = plt.subplots(2, sharey=True, tight_layout=True)"
"0","axs1.plot(iats, label=""iats"")"
"1","[<matplotlib.lines.Line2D object at 0x152aa9ca0>]
"
"0","axs1.set_title(f'iats: {iats}')"
"1","Text(0.5, 1.0, 'iats: [ 0 15 15 15 15 15 15 15 15 15 15 15]')
"
"0","axs2.plot(iats_d, label=""iats_d"")"
"1","[<matplotlib.lines.Line2D object at 0x152ab8c40>]
"
"0","axs2.set_title(f'iats_d: {iats_d}')"
"1","Text(0.5, 1.0, 'iats_d: [15  0  0  0  0  0  0  0  0  0  0]')
"
"0","fig2, axs3 = plt.subplots(1, sharey=True, tight_layout=True)"
"0","axs3.hist(simreswt, bins = 300)"
"1","(array([1.0452e+04, 5.4240e+03, 5.5570e+03, 5.2810e+03, 5.1300e+03,
       4.7070e+03, 4.4410e+03, 4.1940e+03, 3.9210e+03, 3.5910e+03,
       3.3410e+03, 3.2310e+03, 2.7210e+03, 2.5100e+03, 2.3010e+03,
       2.2300e+03, 2.0700e+03, 1.8500e+03, 1.7300e+03, 1.5610e+03,
       1.4610e+03, 1.3020e+03, 1.2530e+03, 1.1640e+03, 1.1510e+03,
       1.0080e+03, 9.1000e+02, 8.8100e+02, 8.1800e+02, 7.4800e+02,
       7.1900e+02, 6.3400e+02, 6.0100e+02, 5.9100e+02, 5.4500e+02,
       5.0200e+02, 4.3300e+02, 4.2700e+02, 3.9200e+02, 4.4700e+02,
       3.6400e+02, 3.7000e+02, 3.5000e+02, 2.9300e+02, 2.9400e+02,
       2.8200e+02, 2.8000e+02, 2.4100e+02, 2.1500e+02, 2.2200e+02,
       2.0900e+02, 2.2900e+02, 1.9400e+02, 1.5800e+02, 1.5900e+02,
       1.4000e+02, 1.4700e+02, 1.6100e+02, 1.5000e+02, 1.3600e+02,
       1.1700e+02, 1.0900e+02, 1.1600e+02, 1.2100e+02, 1.0100e+02,
       1.1100e+02, 1.0800e+02, 8.9000e+01, 9.5000e+01, 7.7000e+01,
       7.6000e+01, 7.8000e+01, 8.4000e+01, 8.1000e+01, 6.9000e+01,
       5.7000e+01, 5.6000e+01, 5.0000e+01, 5.3000e+01, 5.0000e+01,
       5.9000e+01, 5.4000e+01, 4.3000e+01, 4.3000e+01, 4.4000e+01,
       4.3000e+01, 3.4000e+01, 3.7000e+01, 4.1000e+01, 3.2000e+01,
       4.1000e+01, 3.9000e+01, 2.9000e+01, 3.0000e+01, 3.7000e+01,
       2.9000e+01, 2.6000e+01, 2.3000e+01, 2.6000e+01, 2.2000e+01,
       2.5000e+01, 2.1000e+01, 1.8000e+01, 2.0000e+01, 1.6000e+01,
       1.9000e+01, 1.3000e+01, 2.4000e+01, 1.4000e+01, 2.3000e+01,
       1.0000e+01, 1.7000e+01, 2.0000e+01, 1.4000e+01, 1.0000e+01,
       1.5000e+01, 1.9000e+01, 1.0000e+01, 1.2000e+01, 1.9000e+01,
       1.4000e+01, 1.0000e+01, 8.0000e+00, 1.4000e+01, 8.0000e+00,
       1.1000e+01, 8.0000e+00, 8.0000e+00, 9.0000e+00, 1.1000e+01,
       6.0000e+00, 9.0000e+00, 5.0000e+00, 8.0000e+00, 1.2000e+01,
       1.3000e+01, 8.0000e+00, 6.0000e+00, 4.0000e+00, 6.0000e+00,
       2.0000e+00, 8.0000e+00, 8.0000e+00, 8.0000e+00, 5.0000e+00,
       5.0000e+00, 3.0000e+00, 6.0000e+00, 3.0000e+00, 4.0000e+00,
       3.0000e+00, 6.0000e+00, 7.0000e+00, 3.0000e+00, 4.0000e+00,
       3.0000e+00, 2.0000e+00, 7.0000e+00, 2.0000e+00, 3.0000e+00,
       1.0000e+00, 5.0000e+00, 4.0000e+00, 6.0000e+00, 3.0000e+00,
       3.0000e+00, 1.0000e+00, 3.0000e+00, 6.0000e+00, 3.0000e+00,
       3.0000e+00, 1.0000e+00, 4.0000e+00, 1.0000e+00, 4.0000e+00,
       2.0000e+00, 3.0000e+00, 1.0000e+00, 2.0000e+00, 1.0000e+00,
       1.0000e+00, 3.0000e+00, 2.0000e+00, 1.0000e+00, 4.0000e+00,
       4.0000e+00, 1.0000e+00, 1.0000e+00, 0.0000e+00, 2.0000e+00,
       0.0000e+00, 4.0000e+00, 3.0000e+00, 3.0000e+00, 1.0000e+00,
       0.0000e+00, 2.0000e+00, 1.0000e+00, 3.0000e+00, 2.0000e+00,
       2.0000e+00, 0.0000e+00, 1.0000e+00, 0.0000e+00, 0.0000e+00,
       1.0000e+00, 2.0000e+00, 0.0000e+00, 0.0000e+00, 1.0000e+00,
       3.0000e+00, 2.0000e+00, 0.0000e+00, 1.0000e+00, 1.0000e+00,
       1.0000e+00, 0.0000e+00, 0.0000e+00, 1.0000e+00, 0.0000e+00,
       0.0000e+00, 1.0000e+00, 1.0000e+00, 2.0000e+00, 1.0000e+00,
       1.0000e+00, 1.0000e+00, 0.0000e+00, 1.0000e+00, 1.0000e+00,
       1.0000e+00, 1.0000e+00, 1.0000e+00, 1.0000e+00, 1.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 1.0000e+00, 0.0000e+00,
       1.0000e+00, 0.0000e+00, 0.0000e+00, 1.0000e+00, 0.0000e+00,
       1.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00,
       0.0000e+00, 1.0000e+00, 0.0000e+00, 0.0000e+00, 1.0000e+00,
       0.0000e+00, 1.0000e+00, 1.0000e+00, 1.0000e+00, 0.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 1.0000e+00, 1.0000e+00,
       0.0000e+00, 0.0000e+00, 0.0000e+00, 0.0000e+00, 1.0000e+00]), array([ 0.        ,  0.10780563,  0.21561127,  0.3234169 ,  0.43122253,
        0.53902817,  0.6468338 ,  0.75463943,  0.86244506,  0.9702507 ,
        1.07805633,  1.18586196,  1.2936676 ,  1.40147323,  1.50927886,
        1.6170845 ,  1.72489013,  1.83269576,  1.9405014 ,  2.04830703,
        2.15611266,  2.26391829,  2.37172393,  2.47952956,  2.58733519,
        2.69514083,  2.80294646,  2.91075209,  3.01855773,  3.12636336,
        3.23416899,  3.34197463,  3.44978026,  3.55758589,  3.66539152,
        3.77319716,  3.88100279,  3.98880842,  4.09661406,  4.20441969,
        4.31222532,  4.42003096,  4.52783659,  4.63564222,  4.74344786,
        4.85125349,  4.95905912,  5.06686475,  5.17467039,  5.28247602,
        5.39028165,  5.49808729,  5.60589292,  5.71369855,  5.82150419,
        5.92930982,  6.03711545,  6.14492109,  6.25272672,  6.36053235,
        6.46833798,  6.57614362,  6.68394925,  6.79175488,  6.89956052,
        7.00736615,  7.11517178,  7.22297742,  7.33078305,  7.43858868,
        7.54639432,  7.65419995,  7.76200558,  7.86981121,  7.97761685,
        8.08542248,  8.19322811,  8.30103375,  8.40883938,  8.51664501,
        8.62445065,  8.73225628,  8.84006191,  8.94786755,  9.05567318,
        9.16347881,  9.27128444,  9.37909008,  9.48689571,  9.59470134,
        9.70250698,  9.81031261,  9.91811824, 10.02592388, 10.13372951,
       10.24153514, 10.34934078, 10.45714641, 10.56495204, 10.67275767,
       10.78056331, 10.88836894, 10.99617457, 11.10398021, 11.21178584,
       11.31959147, 11.42739711, 11.53520274, 11.64300837, 11.75081401,
       11.85861964, 11.96642527, 12.0742309 , 12.18203654, 12.28984217,
       12.3976478 , 12.50545344, 12.61325907, 12.7210647 , 12.82887034,
       12.93667597, 13.0444816 , 13.15228724, 13.26009287, 13.3678985 ,
       13.47570413, 13.58350977, 13.6913154 , 13.79912103, 13.90692667,
       14.0147323 , 14.12253793, 14.23034357, 14.3381492 , 14.44595483,
       14.55376047, 14.6615661 , 14.76937173, 14.87717736, 14.984983  ,
       15.09278863, 15.20059426, 15.3083999 , 15.41620553, 15.52401116,
       15.6318168 , 15.73962243, 15.84742806, 15.9552337 , 16.06303933,
       16.17084496, 16.27865059, 16.38645623, 16.49426186, 16.60206749,
       16.70987313, 16.81767876, 16.92548439, 17.03329003, 17.14109566,
       17.24890129, 17.35670693, 17.46451256, 17.57231819, 17.68012382,
       17.78792946, 17.89573509, 18.00354072, 18.11134636, 18.21915199,
       18.32695762, 18.43476326, 18.54256889, 18.65037452, 18.75818016,
       18.86598579, 18.97379142, 19.08159705, 19.18940269, 19.29720832,
       19.40501395, 19.51281959, 19.62062522, 19.72843085, 19.83623649,
       19.94404212, 20.05184775, 20.15965339, 20.26745902, 20.37526465,
       20.48307028, 20.59087592, 20.69868155, 20.80648718, 20.91429282,
       21.02209845, 21.12990408, 21.23770972, 21.34551535, 21.45332098,
       21.56112662, 21.66893225, 21.77673788, 21.88454351, 21.99234915,
       22.10015478, 22.20796041, 22.31576605, 22.42357168, 22.53137731,
       22.63918295, 22.74698858, 22.85479421, 22.96259985, 23.07040548,
       23.17821111, 23.28601674, 23.39382238, 23.50162801, 23.60943364,
       23.71723928, 23.82504491, 23.93285054, 24.04065618, 24.14846181,
       24.25626744, 24.36407308, 24.47187871, 24.57968434, 24.68748997,
       24.79529561, 24.90310124, 25.01090687, 25.11871251, 25.22651814,
       25.33432377, 25.44212941, 25.54993504, 25.65774067, 25.76554631,
       25.87335194, 25.98115757, 26.0889632 , 26.19676884, 26.30457447,
       26.4123801 , 26.52018574, 26.62799137, 26.735797  , 26.84360264,
       26.95140827, 27.0592139 , 27.16701954, 27.27482517, 27.3826308 ,
       27.49043643, 27.59824207, 27.7060477 , 27.81385333, 27.92165897,
       28.0294646 , 28.13727023, 28.24507587, 28.3528815 , 28.46068713,
       28.56849277, 28.6762984 , 28.78410403, 28.89190966, 28.9997153 ,
       29.10752093, 29.21532656, 29.3231322 , 29.43093783, 29.53874346,
       29.6465491 , 29.75435473, 29.86216036, 29.969966  , 30.07777163,
       30.18557726, 30.29338289, 30.40118853, 30.50899416, 30.61679979,
       30.72460543, 30.83241106, 30.94021669, 31.04802233, 31.15582796,
       31.26363359, 31.37143922, 31.47924486, 31.58705049, 31.69485612,
       31.80266176, 31.91046739, 32.01827302, 32.12607866, 32.23388429,
       32.34168992]), <BarContainer object of 300 artists>)
"
"0","axs3.set_title(f'schedule: {sim}, mwt: {mwt}, mln: {mln}, loss: {loss}')"
"1","Text(0.5, 1.0, 'schedule: [1 1 1 1 1 1 1 1 1 1 1 1], mwt: 1.6199410112614003, mln: 1.9792164579132592, loss: 1.7995787345873298')
"
